## 微服务应用 —— 微型交易系统

前面我们已经了解了不少关于Vert.x和微服务的知识，现在是时候来讨论一下我们这个实验里要开发的应用了。

我们将会开发一个模拟的金融系统，你可以在这里面疯狂赚钱（虚拟货币）。。。这个应用由以下的微服务组合而成：

* 报价生成器(The quote generator) —— 这个非真实性的、模拟性质的生成器生成三个公司的股票报价： _MacroHard_,
_Divinator_ 和 _Black Coat_ 。市场数据会发送至Vert.x的Event Bus上。

* 交易商(The traders) —— 交易商是接收报价并且决定他们要不要买入或卖出股票的一系列组件。这个功能依赖于 _投资组合_ 服务。

* 投资组合服务(The portfolio) —— 它管理着你的钱和你所拥有的股票。它被暴露作为 _服务代理_ (service proxy)，
比如一个基于Vert.x的Event Bus的异步RPC服务。对每一个成功的操作，它都会往Event Bus上发送一条描述此操作的消息。
它使用报价生成器来评估当前投资组合的价值。

* 审计服务(The audit) —— 这是法律方面的服务。。。你需要记录下你所有的操作（是的，这是法律所要求的）。审计服务接收来自Event
Bus的操作并且将其存储至数据库中。同时审计服务也会提供一组REST API来查询最近的操作。

* 仪表板(The dashboard) —— 一个可以让你了解实时交易信息的Web UI接口。

我们来看一下这个系统的架构：

image::workshop-application.png[Micro-Trader Architecture, 800]

我们的金融系统使用了几种类型的服务：

* HTTP端点 (例如 REST API) —— 这种服务通过URL进行定位。
* 服务代理 —— 这是一种通过RPC通信暴露于Event Bus上的异步服务。这种服务通过地址进行定位。
* 消息源(message sources) —— 这是一种往Event Bus上发布消息的组件。这种服务通过地址进行定位。

在运行时，每一个组件都运行于独立的Docker容器中。当需要进行名称解析的时候，这些容器会通过链接(`link`)进行互联。

仪表板展现了当前可用的服务、每个公司的股票指数，最近的交易操作以及你当前投资组合的状态：


image::dashboard.png[Dashboard, 800]

下面你将要动手实现这个金融系统的关键部分。为了描述Vert.x其它的一些特性，我们提供了剩余部分的一些代码。
我们对你需要编写的代码部分用 **TODO** 做了标记：

[source,java]
----
//TODO
// ----
// your code here
// ----
----

